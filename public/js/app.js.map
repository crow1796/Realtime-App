{"version":3,"sources":["app.js","controllers.js","factories.js","services.js","directives.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["'use strict';\r\nvar socket = io.connect((window.location.origin.split(':8888')[0]) + ':7876');\r\n(function(window, document, angular, $){\r\n\r\n\tangular\r\n\t\t.module('rt_app', []);\r\n\r\n})(window, document, window.angular, window.jQuery);","(function(window, document, angular, $){\r\n\r\n\tlet AppControllers = {};\r\n\t(function(AppControllers){\r\n\t\tAppControllers.NewsfeedController = function(postFactory, postsService){\r\n\t\t\tlet vm = this;\r\n\t\t\tvm.postContent = '';\r\n\t\t\tvm.processPost = processPost;\r\n\t\t\tvm.posts = [];\r\n\t\t\tpostFactory.getPosts().then((response) => { vm.posts = response; });\r\n\r\n\t\t\tsocket.on('new_post', function(){\r\n\t\t\t\tpostFactory.getPosts().then((response) => { vm.posts = response; });\r\n\t\t\t\tvm.postContent = '';\r\n\t\t\t});\r\n\r\n\t\t\tsocket.on('new_comment', function(){\r\n\t\t\t\tpostFactory.getPosts().then((response) => { vm.posts = response; });\r\n\t\t\t\tvm.postContent = '';\r\n\t\t\t});\r\n\r\n\t\t\tfunction processPost(){\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tpostsService.sendPost(vm.postContent)\r\n\t\t\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\t\t\tpostsService.broadcastPost(response);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tAppControllers.SinglePostController = function(singlePostService, postFactory){\r\n\t\t\tlet vm = this;\r\n\t\t\tvm.comment = '';\r\n\t\t\tpostFactory.getPosts().then((response) => { vm.posts = response; });\r\n\t\t\tvm.sendComment = sendComment;\r\n\r\n\t\t\tfunction sendComment(index){\r\n\t\t\t\tif(event.keyCode == 13 && event.shiftKey == false){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tif(vm.comment != ''){\r\n\t\t\t\t\t\tvm.currentPost = vm.posts[index];\r\n\t\t\t\t\t\tvm.currentPost.comment_content = vm.comment;\r\n\t\t\t\t\t\tsinglePostService.sendComment(vm.currentPost)\r\n\t\t\t\t\t\t\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsinglePostService.broadcastComment(response);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvm.comment = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tAppControllers.NotificationsController = function(notificationsService, notificationsFactory, $timeout){\r\n\t\t\tlet vm = this;\r\n\t\t\tvm.showClass = false;\r\n\t\t\tnotificationsFactory.getNotifications().then((response) => { vm.notifications = response; });\r\n\r\n\t\t\tsocket.on('new_notification', function(){\r\n\t\t\t\tnotificationsFactory.getNotifications().then((response) => { vm.notifications = response; });\r\n\t\t\t\tvm.showClass = true;\r\n\t\t\t\t$timeout(function(){\r\n\t\t\t\t\tvm.showClass = false;\r\n\t\t\t\t}, 1000);\r\n\t\t\t});\r\n\t\t};\r\n\t\treturn AppControllers;\r\n\t})(AppControllers || {});\r\n\r\n\tangular\r\n\t\t.module('rt_app')\r\n\t\t.controller('newsfeedController', ['postFactory', 'postsService', AppControllers.NewsfeedController])\r\n\t\t.controller('singlePostController', ['singlePostService', 'postFactory', AppControllers.SinglePostController])\r\n\t\t.controller('notificationsController', ['notificationsService', 'notificationsFactory', '$timeout', AppControllers.NotificationsController]);\r\n\r\n})(window, document, window.angular, window.jQuery);","(function(window, document, angular, $){\r\n\r\n\tlet AppFactories = {};\r\n\t(function(AppFactories) {\r\n\t\tAppFactories.PostFactory = function($http){\r\n\t\t\tlet factory = {\r\n\t\t\t\tgetPosts: getPosts\r\n\t\t\t};\r\n\r\n\t\t\treturn factory;\r\n\r\n\t\t\tfunction getPosts(){\r\n\t\t\t\treturn $http({\r\n\t\t\t\t\t'url': window.location.origin + '/api/posts',\r\n\t\t\t\t\t'method': 'GET'\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tAppFactories.NotificationsFactory = function($http, notificationsService){\r\n\t\t\tlet factory = {\r\n\t\t\t\tgetNotifications: getNotifications\r\n\t\t\t};\r\n\t\t\treturn factory;\r\n\r\n\t\t\tfunction getNotifications(){\r\n\t\t\t\treturn $http({\r\n\t\t\t\t\t'url': window.location.origin + '/api/notifications',\r\n\t\t\t\t\t'method': 'GET'\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn AppFactories;\r\n\t})(AppFactories || {});\r\n\r\n\tangular\r\n\t\t.module('rt_app')\r\n\t\t.factory('postFactory', ['$http', 'postsService', AppFactories.PostFactory])\r\n\t\t.factory('notificationsFactory', ['$http', 'notificationsService', AppFactories.NotificationsFactory]);\r\n\r\n})(window, document, window.angular, window.jQuery);","(function(window, document, angular, $){\r\n\r\n\tlet AppServices = {};\r\n\t(function(AppServices) {\r\n\t\tAppServices.PostsService = function($http, $q){\r\n\t\t\tthis.sendPost = sendPost;\r\n\t\t\tthis.broadcastPost = broadcastPost;\r\n\r\n\t\t\tfunction sendPost(data){\r\n\t\t\t\tlet requestData = {\r\n\t\t\t\t\t'post_content': data\r\n\t\t\t\t};\r\n\t\t\t\treturn $http({\r\n\t\t\t\t\t'url': window.location.origin + '/api/post',\r\n\t\t\t\t\t'method': 'POST',\r\n\t\t\t\t\t'data': requestData\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tif(response.data == false){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction broadcastPost(data){\r\n\t\t\t\tsocket.emit('new_post', data);\r\n\t\t\t\tsocket.emit('new_notification', data);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tAppServices.SinglePostService = function($http, $q){\r\n\t\t\tthis.sendComment = sendComment;\r\n\t\t\tthis.broadcastComment = broadcastComment;\r\n\r\n\t\t\tfunction sendComment(data){\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\treturn $http({\r\n\t\t\t\t\t'url': window.location.origin + '/api/comment',\r\n\t\t\t\t\t'method': 'POST',\r\n\t\t\t\t\t'data': data\r\n\t\t\t\t})\r\n\t\t\t\t.then((response) => {\r\n\t\t\t\t\tif(response.data == false){\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn response.data;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tfunction broadcastComment(data){\r\n\t\t\t\tsocket.emit('new_comment', data);\r\n\t\t\t\tsocket.emit('new_notification', data);\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tAppServices.NotificationsService = function($http, $q){\r\n\t\t};\r\n\t\treturn AppServices;\r\n\t})(AppServices || {});\r\n\r\n\tangular\r\n\t\t.module('rt_app')\r\n\t\t.service('postsService', ['$http', '$q', AppServices.PostsService])\r\n\t\t.service('singlePostService', ['$http', '$q', AppServices.SinglePostService])\r\n\t\t.service('notificationsService', ['$http', '$q', AppServices.NotificationsService]);\r\n\r\n})(window, document, window.angular, window.jQuery);","(function(window, document, angular, $){\r\n\r\n\tlet AppDirectives = {};\r\n\t(function(AppDirectives) {\r\n\t\tAppDirectives.DiffForHumans = function(){\r\n\t\t\tlet directive = {\r\n\t\t\t\trestrict: 'E',\r\n\t\t\t\tscope: {\r\n\t\t\t\t\tdate: '@'\r\n\t\t\t\t},\r\n\t\t\t\tlink: linkFn\r\n\t\t\t};\r\n\r\n\t\t\treturn directive;\r\n\r\n\t\t\tfunction linkFn(scope, element, attrs){\r\n\t\t\t\telement.innerHtml = attrs.date;\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\treturn AppDirectives;\r\n\t})(AppDirectives || {});\r\n\r\n\tangular\r\n\t\t.module('rt_app')\r\n\t\t.directive('diffForHumans', AppDirectives.DiffForHumans);\r\n\r\n})(window, document, window.angular, window.jQuery);"],"sourceRoot":"/source/"}